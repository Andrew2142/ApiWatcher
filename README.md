# API Watcher

A lightweight Go-based website monitoring tool that checks your websites for failing API calls and sends alert emails when issues are detected.

---

## Features

* **Remote Monitoring**: Deploy daemon on any Linux server and manage via GUI
* **GUI Interface**: User-friendly GUI for configuration and monitoring
* **Automated SMTP Setup**: Configure email alerts through GUI (auto-generates .env file)
* **Website Monitoring**: Monitors multiple websites automatically
* **Failure Detection**: Detects failing API calls (HTTP 4xx/5xx responses)
* **Smart Filtering**: Ignores static assets like `.js`, `.css`, `.png`, etc.
* **Email Alerts**: Sends email alerts via configurable SMTP
* **Dashboard**: Real-time monitoring dashboard with site statistics
* **Profile Management**: Save and reuse server and monitoring configurations

---

## Installation

### Prerequisites

* Go 1.19+
* Google Chrome or Chromium installed

### Setup

1. Clone the repository:

```bash
git clone https://github.com/yourusername/url-checker.git
cd url-checker
```

2. Install dependencies:

```bash
go mod tidy
```

3. Build the GUI application:

```bash
go build -o apiwatcher-gui ./cmd/apiwatcher-gui
```

4. Run the GUI:

```bash
./apiwatcher-gui
```

The GUI will guide you through:
- Connecting to your remote server (SSH)
- Installing the daemon (fully automated)
- **Configuring SMTP settings** (auto-generates `.env` file)
- Setting up website monitoring

---

## SMTP Configuration

### Automated SMTP Setup via GUI

API Watcher provides a user-friendly GUI for configuring email alerts:

1. **During Setup**: When you first install the daemon, you'll be prompted to configure SMTP
2. **After Setup**: Access SMTP settings anytime via the "SMTP Settings" button in the dashboard

The GUI automatically:
- Saves your configuration to `~/.apiwatcher/smtp/smtp-config.json`
- Generates a `.env` file in the project root
- Validates your settings before saving

**Supported SMTP Providers:**
- Gmail (smtp.gmail.com:587) - requires App Password
- Outlook (smtp-mail.outlook.com:587)
- Yahoo (smtp.mail.yahoo.com:587)
- Office 365 (smtp.office365.com:587)
- Any other SMTP server

### Manual SMTP Configuration

If you prefer manual configuration, copy `example.env` to `.env` and edit:

```env
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM=alerts@yourdomain.com
WORKER_SLEEP=10
```

**Note**: The `.env` file is auto-generated by the GUI. If you edit it manually, you can reload settings through the GUI's SMTP configuration screen.

---

## Configuration Files

### SMTP Config
* Location: `~/.apiwatcher/smtp/smtp-config.json`
* Managed via GUI "SMTP Settings" button
* Separate from server profiles for easy management

### Monitoring Config
* Location: `~/.url-checker/config.json`
* Stores websites to monitor and alert email
* Created through GUI workflow

Example:
```json
{
  "email": "alerts@example.com",
  "websites": [
    "https://example.com",
    "https://api.example.com"
  ]
}
```

### Server Profiles
* Location: `~/.apiwatcher/profiles/`
* Stores saved SSH server configurations
* Managed via GUI server connection screen

---

## How it Works

1. Loads configuration from `config.json` and `.env`
2. Uses headless Chrome (`chromedp`) to visit each website
3. Captures network requests and checks their HTTP status
4. Sends alert emails if any request fails
5. Avoids duplicate alerts by checking the last alert time (default 5 hours)

---

## Logs & Persistence

* Alert timestamps saved in: `~/.url-checker/alert_log.json`
* Console output shows info, warnings, and errors

---

## Contributing

1. Fork the repository
2. Create a branch for your feature: `git checkout -b feature/my-feature`
3. Commit your changes: `git commit -m "Add my feature"`
4. Push to your branch: `git push origin feature/my-feature`
5. Open a pull request

---

## License

MIT License Â© Legend



INSTALL DAEMON ON SERVER
 
# 1. Navigate to your project
cd ~/dev/ApiWatcher

# 2. Build the daemon
go build -o apiwatcher-daemon ./cmd/apiwatcher-daemon

# 3. Move to the correct location
mkdir -p ~/.apiwatcher/bin
mv apiwatcher-daemon ~/.apiwatcher/bin/

# 4. Restart daemon
pkill -f apiwatcher-daemon
chmod +x ~/.apiwatcher/bin/apiwatcher-daemon
setsid nohup ~/.apiwatcher/bin/apiwatcher-daemon > ~/.apiwatcher/logs/daemon.log 2>&1 < /dev/null &

# 5. Watch logs
tail -f ~/.apiwatcher/logs/daemon.log